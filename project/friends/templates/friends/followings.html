{% extends 'blog/base.html' %}
{% load static %}

{% block content %}
  <div class="container mt-5">
    <h2 class="text-center mb-5">Personas que sigues</h2>
    
    {% if followings_users %}
      <div class="list-group">
        {% for user in followings_users %}
          <div class="list-group-item d-flex align-items-start border-0 rounded-lg shadow-sm mb-4">
            <div class="d-flex align-items-center" style="width: 100%; padding: 15px;">
              
              <!-- Foto de perfil -->
              <div class="mr-4">
                {% if user.image_profile %}
                  <img src="{{ user.image_profile.url }}" alt="Foto de {{ user.username }}" 
                       class="rounded-circle" style="width: 70px; height: 70px; object-fit: cover;">
                {% else %}
                  <img src="{% static 'img/default-avatar.jpg' %}" alt="Imagen por defecto" 
                       class="rounded-circle" style="width: 70px; height: 70px;">
                {% endif %}
              </div>

              <!-- Información del usuario -->
              <div class="w-100">
                <div class="d-flex justify-content-between mb-3">
                  <div>
                    <h5 class="mb-1 text-dark">{{ user.username}}</h5>
                    <p class="text-muted mb-0">{{ user.first_name }} {{ user.last_name }}</p>
                    <p class="text-muted mb-1"><small>Miembro desde {{ user.date_joined|date:"F j, Y" }}</small></p>
                  </div>
                </div>
                <p class="text-muted mt-2">{{ user.bio|default:"No hay biografía disponible." }}</p>
              </div>

            </div>

            <!-- Botón de dejar de seguir -->
            <div class="d-flex justify-content-end mt-3">
              <form action="{% url 'friends:unfollow_user' user.username %}" method="POST">
                {% csrf_token %}
                <button type="submit" class="btn btn-danger btn-sm" title="Dejar de seguir">
                  <i class="fas fa-user-times"></i> Dejar de seguir
                </button>
              </form>
            </div>

          </div>
        {% endfor %}
      </div>
    {% else %}
      <p class="text-center">No sigues a nadie todavía.</p>
    {% endif %}
  </div>
{% endblock %}
